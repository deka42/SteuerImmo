<!DOCTYPE html>

<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immobilien-Steuer-Suite 2025 - Ultimate Enterprise Edition</title>

```
<!-- PWA Meta Tags -->
<meta name="theme-color" content="#3498db">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Steuer-Suite Ultimate">
<meta name="description" content="Ultimate Enterprise Immobiliensteuer-Optimierung 2025 mit KI, Real-time Analytics und PDF-Reports">

<!-- SEO Meta Tags -->
<meta name="keywords" content="Immobilien, Steuer, KI, Real-time, PDF, Enterprise, Analytics, TypeScript">
<meta name="author" content="Immobilien-Steuer-Suite Ultimate">
<meta name="robots" content="index, follow">

<!-- Favicon -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè†</text></svg>">

<!-- External Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

<style>
    :root {
        --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --primary-solid: #667eea;
        --success: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        --success-solid: #11998e;
        --warning: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --warning-solid: #f093fb;
        --danger: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        --danger-solid: #ff9a9e;
        --dark: #2c3e50;
        --light: #f8f9fa;
        --border-radius: 16px;
        --border-radius-sm: 8px;
        --shadow: 0 10px 30px rgba(0,0,0,0.1);
        --shadow-lg: 0 20px 40px rgba(0,0,0,0.15);
        --shadow-xl: 0 30px 60px rgba(0,0,0,0.2);
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --transition-fast: all 0.15s ease;
        --z-index-dropdown: 1000;
        --z-index-modal: 1050;
        --z-index-tooltip: 1070;
        --z-index-overlay: 1080;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    *:focus {
        outline: 2px solid var(--primary-solid);
        outline-offset: 2px;
    }

    body {
        font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        background: var(--primary);
        min-height: 100vh;
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    .app-container {
        max-width: 1600px;
        margin: 0 auto;
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-xl);
        overflow: hidden;
        min-height: 100vh;
        position: relative;
    }

    /* Enhanced Header with Analytics */
    .app-header {
        background: rgba(255,255,255,0.95);
        backdrop-filter: blur(20px);
        padding: 1.5rem 2rem;
        border-bottom: 1px solid #e9ecef;
        position: sticky;
        top: 0;
        z-index: var(--z-index-dropdown);
        transition: var(--transition);
    }

    .app-header.scrolled {
        background: rgba(255,255,255,0.98);
        box-shadow: var(--shadow);
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .app-title {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .app-title h1 {
        font-size: 1.75rem;
        font-weight: 700;
        background: var(--primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .subtitle {
        font-size: 0.85rem;
        color: #6c757d;
        margin-top: 0.25rem;
    }

    .header-actions {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
        align-items: center;
    }

    .performance-indicator {
        background: rgba(17, 153, 142, 0.1);
        color: var(--success-solid);
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .performance-dot {
        width: 8px;
        height: 8px;
        background: var(--success-solid);
        border-radius: 50%;
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    /* Enhanced Main Layout */
    .main-content {
        display: grid;
        grid-template-columns: 320px 1fr 280px;
        min-height: calc(100vh - 120px);
    }

    .sidebar {
        background: var(--light);
        padding: 2rem;
        border-right: 1px solid #e9ecef;
        overflow-y: auto;
    }

    .content-area {
        padding: 2rem;
        overflow-y: auto;
        position: relative;
    }

    .analytics-panel {
        background: var(--light);
        padding: 2rem;
        border-left: 1px solid #e9ecef;
        overflow-y: auto;
    }

    /* Enhanced Navigation */
    .nav-menu {
        list-style: none;
        margin-bottom: 2rem;
    }

    .nav-item {
        margin-bottom: 0.5rem;
    }

    .nav-link {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem 1.25rem;
        color: var(--dark);
        text-decoration: none;
        border-radius: 12px;
        transition: var(--transition);
        font-weight: 500;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .nav-link::before {
        content: '';
        position: absolute;
        left: -100%;
        top: 0;
        width: 100%;
        height: 100%;
        background: var(--primary);
        transition: left 0.3s ease;
        z-index: -1;
    }

    .nav-link:hover::before,
    .nav-link.active::before {
        left: 0;
    }

    .nav-link:hover,
    .nav-link.active {
        color: white;
        transform: translateX(4px);
        box-shadow: var(--shadow);
    }

    .nav-icon {
        font-size: 1.25rem;
        min-width: 1.5rem;
    }

    .nav-badge {
        background: var(--danger-solid);
        color: white;
        font-size: 0.7rem;
        padding: 0.2rem 0.5rem;
        border-radius: 10px;
        margin-left: auto;
    }

    /* Enhanced Cards */
    .card {
        background: white;
        border-radius: var(--border-radius);
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(102, 126, 234, 0.1);
    }

    .card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--primary);
    }

    .card:hover {
        box-shadow: var(--shadow-lg);
        transform: translateY(-2px);
    }

    .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid var(--primary-solid);
    }

    .card-title {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        color: var(--dark);
        font-size: 1.5rem;
        font-weight: 600;
    }

    /* Advanced Form Components */
    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 2rem;
    }

    .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        position: relative;
    }

    .form-label {
        font-weight: 600;
        color: var(--dark);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .required {
        color: var(--danger-solid);
    }

    .form-input,
    .form-select {
        padding: 1rem 1.25rem;
        border: 2px solid #e9ecef;
        border-radius: 12px;
        font-size: 1rem;
        transition: var(--transition);
        background: white;
        font-family: inherit;
        position: relative;
    }

    .form-input:focus,
    .form-select:focus {
        border-color: var(--primary-solid);
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        background: #fafbfc;
    }

    .form-input.valid {
        border-color: var(--success-solid);
        background: rgba(17, 153, 142, 0.05);
    }

    .form-input.invalid {
        border-color: var(--danger-solid);
        background: rgba(255, 154, 158, 0.05);
    }

    .form-help {
        font-size: 0.85rem;
        color: #6c757d;
        font-style: italic;
    }

    .form-error {
        font-size: 0.8rem;
        color: var(--danger-solid);
        margin-top: 0.25rem;
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }

    .input-group {
        position: relative;
    }

    .input-icon {
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: #6c757d;
        pointer-events: none;
    }

    .input-group .form-input {
        padding-right: 3rem;
    }

    /* Real-time Validation Indicators */
    .validation-indicator {
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        font-size: 1.2rem;
        opacity: 0;
        transition: var(--transition);
    }

    .validation-indicator.show {
        opacity: 1;
    }

    .validation-indicator.valid {
        color: var(--success-solid);
    }

    .validation-indicator.invalid {
        color: var(--danger-solid);
    }

    /* Enhanced Buttons */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 1rem 2rem;
        border: none;
        border-radius: 12px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        text-decoration: none;
        position: relative;
        overflow: hidden;
        min-height: 48px;
        font-family: inherit;
    }

    .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.5s;
    }

    .btn:hover::before {
        left: 100%;
    }

    .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none !important;
    }

    .btn-primary {
        background: var(--primary);
        color: white;
        box-shadow: var(--shadow);
    }

    .btn-primary:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }

    .btn-success {
        background: var(--success);
        color: white;
        box-shadow: var(--shadow);
    }

    .btn-warning {
        background: var(--warning);
        color: white;
        box-shadow: var(--shadow);
    }

    .btn-secondary {
        background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        color: white;
        box-shadow: var(--shadow);
    }

    .btn-outline {
        background: transparent;
        border: 2px solid var(--primary-solid);
        color: var(--primary-solid);
    }

    .btn-outline:hover:not(:disabled) {
        background: var(--primary-solid);
        color: white;
    }

    .btn-group {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        margin-top: 2rem;
    }

    /* Progressive Disclosure */
    .advanced-options {
        margin-top: 2rem;
        border-top: 1px solid #e9ecef;
        padding-top: 2rem;
    }

    .disclosure-toggle {
        background: none;
        border: none;
        color: var(--primary-solid);
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
        transition: var(--transition);
    }

    .disclosure-toggle:hover {
        color: var(--dark);
    }

    .disclosure-arrow {
        transition: transform 0.3s ease;
    }

    .disclosure-toggle.open .disclosure-arrow {
        transform: rotate(90deg);
    }

    .disclosure-content {
        display: none;
        animation: slideDown 0.3s ease;
    }

    .disclosure-content.open {
        display: block;
    }

    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Multi-Scenario Comparison */
    .scenario-tabs {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 2rem;
        border-bottom: 2px solid #e9ecef;
    }

    .scenario-tab {
        padding: 1rem 1.5rem;
        background: none;
        border: none;
        border-bottom: 3px solid transparent;
        cursor: pointer;
        font-weight: 600;
        color: #6c757d;
        transition: var(--transition);
    }

    .scenario-tab.active {
        color: var(--primary-solid);
        border-bottom-color: var(--primary-solid);
    }

    .scenario-tab:hover {
        color: var(--dark);
    }

    .scenario-content {
        display: none;
    }

    .scenario-content.active {
        display: block;
        animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    /* Enhanced Results */
    .results-container {
        margin-top: 3rem;
    }

    .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }

    .result-card {
        background: white;
        border-radius: var(--border-radius);
        padding: 2rem;
        border: 2px solid #e9ecef;
        transition: var(--transition);
        position: relative;
        overflow: hidden;
    }

    .result-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: var(--primary);
    }

    .result-card.best {
        border-color: var(--success-solid);
        background: linear-gradient(135deg, rgba(17, 153, 142, 0.05), rgba(56, 239, 125, 0.05));
        animation: highlightPulse 2s infinite;
    }

    .result-card.best::before {
        background: var(--success);
        height: 6px;
    }

    @keyframes highlightPulse {
        0% { box-shadow: var(--shadow); }
        50% { box-shadow: 0 0 0 10px rgba(17, 153, 142, 0.1); }
        100% { box-shadow: var(--shadow); }
    }

    .result-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #e9ecef;
    }

    .result-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--dark);
    }

    .result-badge {
        background: var(--success);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }

    .result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 0;
        border-bottom: 1px solid #f1f3f4;
    }

    .result-item:last-child {
        border-bottom: none;
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 2px solid var(--success-solid);
        font-weight: 600;
        background: rgba(17, 153, 142, 0.05);
        margin-left: -1rem;
        margin-right: -1rem;
        padding-left: 1rem;
        padding-right: 1rem;
        border-radius: var(--border-radius-sm);
    }

    .result-label {
        color: var(--dark);
        font-weight: 500;
    }

    .result-value {
        font-weight: 600;
        color: var(--success-solid);
        font-size: 1.1rem;
    }

    .result-value.negative {
        color: var(--danger-solid);
    }

    /* Enhanced Analytics Panel */
    .analytics-header {
        background: var(--primary);
        margin: -2rem -2rem 2rem -2rem;
        padding: 1.5rem 2rem;
        border-radius: var(--border-radius) var(--border-radius) 0 0;
        color: white;
    }

    .analytics-widget {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        box-shadow: var(--shadow);
        border: 1px solid #e9ecef;
    }

    .widget-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
    }

    .widget-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--dark);
    }

    .widget-icon {
        font-size: 1.5rem;
        color: var(--primary-solid);
    }

    .metric-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--success-solid);
        margin-bottom: 0.5rem;
    }

    .metric-label {
        font-size: 0.9rem;
        color: #6c757d;
    }

    .chart-container {
        height: 200px;
        margin-top: 1rem;
    }

    /* Alerts and Notifications */
    .alert {
        padding: 1.5rem;
        border-radius: var(--border-radius);
        margin: 1.5rem 0;
        position: relative;
        box-shadow: var(--shadow);
        border-left: 4px solid;
    }

    .alert-success {
        background: linear-gradient(135deg, rgba(17, 153, 142, 0.1), rgba(56, 239, 125, 0.1));
        border-left-color: var(--success-solid);
        color: #0d5f56;
    }

    .alert-info {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        border-left-color: var(--primary-solid);
        color: #4c63d2;
    }

    .alert-warning {
        background: linear-gradient(135deg, rgba(240, 147, 251, 0.1), rgba(245, 87, 108, 0.1));
        border-left-color: var(--warning-solid);
        color: #8b2635;
    }

    .alert-danger {
        background: linear-gradient(135deg, rgba(255, 154, 158, 0.1), rgba(254, 207, 239, 0.1));
        border-left-color: var(--danger-solid);
        color: #721c24;
    }

    /* Toast Notifications */
    .toast-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: var(--z-index-tooltip);
        display: flex;
        flex-direction: column;
        gap: 1rem;
        max-width: 400px;
    }

    .toast {
        background: white;
        border-radius: 12px;
        padding: 1.25rem 1.5rem;
        box-shadow: var(--shadow-xl);
        border-left: 4px solid var(--primary-solid);
        min-width: 320px;
        transform: translateX(450px);
        animation: slideInToast 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        position: relative;
        overflow: hidden;
    }

    .toast::before {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        height: 2px;
        background: var(--primary-solid);
        animation: toastProgress 5s linear forwards;
    }

    .toast.success {
        border-left-color: var(--success-solid);
    }

    .toast.success::before {
        background: var(--success-solid);
    }

    .toast.warning {
        border-left-color: var(--warning-solid);
    }

    .toast.warning::before {
        background: var(--warning-solid);
    }

    .toast.danger {
        border-left-color: var(--danger-solid);
    }

    .toast.danger::before {
        background: var(--danger-solid);
    }

    @keyframes slideInToast {
        to { transform: translateX(0); }
    }

    @keyframes toastProgress {
        to { width: 100%; }
    }

    /* Modal Overlays */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.8);
        z-index: var(--z-index-overlay);
        display: none;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
    }

    .modal {
        background: white;
        border-radius: var(--border-radius);
        padding: 2rem;
        max-width: 90vw;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: var(--shadow-xl);
        animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Progress Indicators */
    .progress-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: var(--z-index-overlay);
        display: none;
        align-items: center;
        justify-content: center;
    }

    .progress-modal {
        background: white;
        padding: 2rem;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-xl);
        text-align: center;
        min-width: 300px;
    }

    .spinner {
        width: 40px;
        height: 40px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid var(--primary-solid);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 1rem;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .progress-bar {
        width: 100%;
        height: 8px;
        background: #e9ecef;
        border-radius: 4px;
        overflow: hidden;
        margin: 1rem 0;
    }

    .progress-fill {
        height: 100%;
        background: var(--primary);
        width: 0%;
        transition: width 0.3s ease;
    }

    /* Keyboard Shortcuts Indicator */
    .shortcut-indicator {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: rgba(0,0,0,0.8);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        font-size: 0.8rem;
        opacity: 0;
        transition: var(--transition);
        z-index: var(--z-index-tooltip);
    }

    .shortcut-indicator.show {
        opacity: 1;
    }

    /* Undo/Redo Controls */
    .history-controls {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        gap: 0.5rem;
        z-index: var(--z-index-dropdown);
    }

    .history-btn {
        background: rgba(102, 126, 234, 0.9);
        color: white;
        border: none;
        border-radius: 50%;
        width: 48px;
        height: 48px;
        cursor: pointer;
        font-size: 1.2rem;
        transition: var(--transition);
        box-shadow: var(--shadow);
    }

    .history-btn:hover:not(:disabled) {
        background: var(--primary-solid);
        transform: scale(1.1);
    }

    .history-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
        .main-content {
            grid-template-columns: 280px 1fr 250px;
        }
    }

    @media (max-width: 1024px) {
        .main-content {
            grid-template-columns: 260px 1fr;
        }
        
        .analytics-panel {
            display: none;
        }
    }

    @media (max-width: 768px) {
        .main-content {
            grid-template-columns: 1fr;
        }
        
        .sidebar {
            display: none;
        }
        
        .form-grid {
            grid-template-columns: 1fr;
        }
        
        .results-grid {
            grid-template-columns: 1fr;
        }
        
        .history-controls {
            bottom: 80px;
            right: 10px;
        }
    }

    /* Accessibility Enhancements */
    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --dark: #ffffff;
            --light: #2c3e50;
        }
        
        body {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }
        
        .app-container {
            background: #2c3e50;
            color: white;
        }
        
        .card,
        .result-card,
        .analytics-widget {
            background: #34495e;
            border-color: #495057;
            color: white;
        }
    }

    /* High Contrast Mode */
    @media (prefers-contrast: high) {
        :root {
            --shadow: 0 0 0 2px #000000;
            --shadow-lg: 0 0 0 3px #000000;
        }
        
        .card,
        .result-card {
            border: 2px solid #000000;
        }
    }

    /* Print Styles */
    @media print {
        .sidebar,
        .analytics-panel,
        .btn-group,
        .history-controls,
        .toast-container {
            display: none !important;
        }
        
        .main-content {
            grid-template-columns: 1fr;
        }
        
        .card {
            break-inside: avoid;
            box-shadow: none;
            border: 1px solid #000;
        }
    }

    /* Custom Scrollbars */
    ::-webkit-scrollbar {
        width: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--primary-solid);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #5a6fd8;
    }

    /* Utility Classes */
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .text-right { text-align: right; }
    .font-weight-bold { font-weight: 600; }
    .font-weight-normal { font-weight: 400; }
    .text-muted { color: #6c757d; }
    .text-primary { color: var(--primary-solid); }
    .text-success { color: var(--success-solid); }
    .text-warning { color: var(--warning-solid); }
    .text-danger { color: var(--danger-solid); }
    .d-flex { display: flex; }
    .d-none { display: none; }
    .justify-content-center { justify-content: center; }
    .align-items-center { align-items: center; }
    .gap-1 { gap: 0.5rem; }
    .gap-2 { gap: 1rem; }
    .gap-3 { gap: 1.5rem; }
    .w-100 { width: 100%; }
    .h-100 { height: 100%; }
    .mt-1 { margin-top: 0.5rem; }
    .mt-2 { margin-top: 1rem; }
    .mt-3 { margin-top: 1.5rem; }
    .mt-4 { margin-top: 2rem; }
    .mb-1 { margin-bottom: 0.5rem; }
    .mb-2 { margin-bottom: 1rem; }
    .mb-3 { margin-bottom: 1.5rem; }
    .mb-4 { margin-bottom: 2rem; }
    .p-1 { padding: 0.5rem; }
    .p-2 { padding: 1rem; }
    .p-3 { padding: 1.5rem; }
    .p-4 { padding: 2rem; }
</style>
```

</head>
<body>
    <div class="app-container">
        <!-- Enhanced Header with Performance Indicator -->
        <header class="app-header" id="app-header">
            <div class="header-content">
                <div class="app-title">
                    <span style="font-size: 2.5rem;">üè†</span>
                    <div>
                        <h1>Immobilien-Steuer-Suite 2025</h1>
                        <div class="subtitle">Ultimate Enterprise ‚Ä¢ KI ‚Ä¢ Real-time ‚Ä¢ PDF Reports ‚Ä¢ Multi-Scenario</div>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="performance-indicator">
                        <div class="performance-dot"></div>
                        <span id="performance-text">System Ready</span>
                    </div>
                    <button class="btn btn-primary" onclick="app.exportPDFReport()" title="PDF-Bericht exportieren (Ctrl+P)">
                        üìä PDF Report
                    </button>
                    <button class="btn btn-success" onclick="app.loadExample()" title="Beispieldaten laden (Ctrl+E)">
                        üí° Beispiel
                    </button>
                    <button class="btn btn-warning" onclick="app.showComparison()" title="Multi-Szenario Vergleich (Ctrl+M)">
                        üìà Vergleich
                    </button>
                    <button class="btn btn-secondary" onclick="app.resetAll()" title="Alles zur√ºcksetzen (Ctrl+R)">
                        üîÑ Reset
                    </button>
                </div>
            </div>
        </header>

```
    <div class="main-content">
        <!-- Enhanced Sidebar with Navigation -->
        <aside class="sidebar">
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#verkauf" class="nav-link active" data-section="verkauf">
                        <span class="nav-icon">üí∞</span>
                        Verkaufssteuer
                        <span class="nav-badge">AI</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#grundsteuer" class="nav-link" data-section="grundsteuer">
                        <span class="nav-icon">üèõÔ∏è</span>
                        Grundsteuer 2025
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#erbschaft" class="nav-link" data-section="erbschaft">
                        <span class="nav-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                        Erbschaftsteuer
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#schenkung" class="nav-link" data-section="schenkung">
                        <span class="nav-icon">üéÅ</span>
                        Schenkungssteuer
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#strategies" class="nav-link" data-section="strategies">
                        <span class="nav-icon">üéØ</span>
                        AI-Strategien
                    </a>
                </li>
            </ul>

            <!-- Plugin Architecture Demo -->
            <div class="card" style="margin-top: 2rem;">
                <div class="card-header">
                    <h3 style="font-size: 1rem;">üîå Plugins</h3>
                </div>
                <div class="plugin-list">
                    <div class="plugin-item" style="padding: 0.5rem; margin: 0.5rem 0; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer;" onclick="app.loadPlugin('bundesland-analyzer')">
                        <strong>üó∫Ô∏è Bundesland-Analyzer</strong>
                        <small style="display: block; color: #6c757d;">Steuervergleich nach Bundesl√§ndern</small>
                    </div>
                    <div class="plugin-item" style="padding: 0.5rem; margin: 0.5rem 0; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer;" onclick="app.loadPlugin('inflation-calculator')">
                        <strong>üìä Inflations-Rechner</strong>
                        <small style="display: block; color: #6c757d;">Ber√ºcksichtigung der Inflation</small>
                    </div>
                    <div class="plugin-item" style="padding: 0.5rem; margin: 0.5rem 0; border: 1px solid #e9ecef; border-radius: 8px; cursor: pointer;" onclick="app.loadPlugin('ai-optimizer')">
                        <strong>ü§ñ KI-Optimierer</strong>
                        <small style="display: block; color: #6c757d;">Machine Learning Vorhersagen</small>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="content-area">
            <!-- Multi-Scenario Tabs -->
            <div class="scenario-tabs">
                <button class="scenario-tab active" data-scenario="scenario1" onclick="app.switchScenario('scenario1')">
                    Szenario 1
                </button>
                <button class="scenario-tab" data-scenario="scenario2" onclick="app.switchScenario('scenario2')">
                    Szenario 2
                </button>
                <button class="scenario-tab" data-scenario="scenario3" onclick="app.switchScenario('scenario3')">
                    Szenario 3
                </button>
                <button class="btn btn-outline" onclick="app.addScenario()" style="margin-left: auto; padding: 0.5rem 1rem; font-size: 0.9rem;">
                    ‚ûï Szenario hinzuf√ºgen
                </button>
            </div>

            <!-- Main Form Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <span>üí∞</span>
                        <span>KI-Optimierte Verkaufssteuer-Berechnung 2025</span>
                    </div>
                </div>

                <!-- Real-time Calculation Toggle -->
                <div class="alert alert-info">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>ü§ñ Real-time KI-Berechnung aktiviert - Optimale Strukturen werden automatisch berechnet</span>
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="realtime-calc" checked onchange="app.toggleRealtime()">
                            <span>Real-time</span>
                        </label>
                    </div>
                </div>

                <div class="scenario-content active" id="scenario1-content">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">
                                üè† Kaufpreis <span class="required">*</span>
                            </label>
                            <div class="input-group">
                                <input type="number" id="kaufpreis" class="form-input" placeholder="z.B. 400.000" min="0" step="1000" data-shortcut="k">
                                <div class="validation-indicator" id="kaufpreis-indicator"></div>
                            </div>
                            <div class="form-help">Urspr√ºnglicher Kaufpreis der Immobilie</div>
                            <div class="form-error" id="kaufpreis-error"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                üíµ Verkaufspreis <span class="required">*</span>
                            </label>
                            <div class="input-group">
                                <input type="number" id="verkaufspreis" class="form-input" placeholder="z.B. 600.000" min="0" step="1000" data-shortcut="v">
                                <div class="validation-indicator" id="verkaufspreis-indicator"></div>
                            </div>
                            <div class="form-help">Aktueller Verkaufspreis</div>
                            <div class="form-error" id="verkaufspreis-error"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                üìã Nebenkosten Kauf
                            </label>
                            <div class="input-group">
                                <input type="number" id="nebenkosten_kauf" class="form-input" placeholder="z.B. 40.000" min="0" step="1000">
                                <div class="validation-indicator" id="nebenkosten_kauf-indicator"></div>
                            </div>
                            <div class="form-help">Notar, Grunderwerbsteuer, Makler beim Kauf</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                ü§ù Nebenkosten Verkauf
                            </label>
                            <div class="input-group">
                                <input type="number" id="nebenkosten_verkauf" class="form-input" placeholder="z.B. 30.000" min="0" step="1000">
                                <div class="validation-indicator" id="nebenkosten_verkauf-indicator"></div>
                            </div>
                            <div class="form-help">Makler, Notar, Inserate beim Verkauf</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                üî® Modernisierung/Renovierung
                            </label>
                            <div class="input-group">
                                <input type="number" id="modernisierung" class="form-input" placeholder="z.B. 35.000" min="0" step="1000">
                                <div class="validation-indicator" id="modernisierung-indicator"></div>
                            </div>
                            <div class="form-help">Steuerlich absetzbare Investitionen</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                ‚è±Ô∏è Haltedauer (Jahre) <span class="required">*</span>
                            </label>
                            <div class="input-group">
                                <input type="number" id="haltedauer" class="form-input" placeholder="z.B. 8" min="0" max="50" step="0.1" data-shortcut="h">
                                <div class="validation-indicator" id="haltedauer-indicator"></div>
                            </div>
                            <div class="form-help">Zeit zwischen Kauf und Verkauf</div>
                            <div class="form-error" id="haltedauer-error"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                üíº Pers√∂nlicher Steuersatz (%)
                            </label>
                            <select id="steuersatz" class="form-select">
                                <option value="14">14% (Eingangssteuersatz)</option>
                                <option value="24">24% (Mittlerer Bereich)</option>
                                <option value="32">32% (H√∂herer Bereich)</option>
                                <option value="42" selected>42% (Spitzensteuersatz)</option>
                                <option value="45">45% (Reichensteuer)</option>
                            </select>
                            <div class="form-help">Ihr aktueller Einkommensteuersatz</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                ‚õ™ Kirchensteuer (%)
                            </label>
                            <select id="kirchensteuer" class="form-select">
                                <option value="0">0% (Konfessionslos)</option>
                                <option value="8" selected>8% (Bayern, BW)</option>
                                <option value="9">9% (Andere Bundesl√§nder)</option>
                            </select>
                            <div class="form-help">Kirchensteuer je nach Bundesland</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                üó∫Ô∏è Bundesland
                            </label>
                            <select id="bundesland" class="form-select">
                                <option value="bw">Baden-W√ºrttemberg</option>
                                <option value="by">Bayern</option>
                                <option value="be">Berlin</option>
                                <option value="bb">Brandenburg</option>
                                <option value="hb">Bremen</option>
                                <option value="hh">Hamburg</option>
                                <option value="he">Hessen</option>
                                <option value="mv">Mecklenburg-Vorpommern</option>
                                <option value="ni">Niedersachsen</option>
                                <option value="nw" selected>Nordrhein-Westfalen</option>
                                <option value="rp">Rheinland-Pfalz</option>
                                <option value="sl">Saarland</option>
                                <option value="sn">Sachsen</option>
                                <option value="st">Sachsen-Anhalt</option>
                                <option value="sh">Schleswig-Holstein</option>
                                <option value="th">Th√ºringen</option>
                            </select>
                            <div class="form-help">F√ºr bundeslandspezifische Steuerberechnung</div>
                        </div>
                    </div>

                    <!-- Progressive Disclosure for Advanced Options -->
                    <div class="advanced-options">
                        <button class="disclosure-toggle" onclick="app.toggleAdvanced()">
                            <span class="disclosure-arrow">‚ñ∂</span>
                            Erweiterte Optionen
                        </button>
                        <div class="disclosure-content" id="advanced-content">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">
                                        üí∞ Zus√§tzliche Werbungskosten
                                    </label>
                                    <input type="number" id="werbungskosten" class="form-input" placeholder="z.B. 5.000" min="0" step="100">
                                    <div class="form-help">Weitere steuerlich absetzbare Kosten</div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">
                                        üìä Abschreibungen (AfA)
                                    </label>
                                    <input type="number" id="abschreibungen" class="form-input" placeholder="z.B. 12.000" min="0" step="100">
                                    <div class="form-help">J√§hrliche Abschreibungen bei Vermietung</div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">
                                        üèóÔ∏è Immobilientyp
                                    </label>
                                    <select id="immobilientyp" class="form-select">
                                        <option value="eigenheim">Eigenheim/Privatnutzung</option>
                                        <option value="vermietung">Vermietungsimmobilie</option>
                                        <option value="gewerbe">Gewerbeimmobilie</option>
                                        <option value="mischnutzung">Mischnutzung</option>
                                    </select>
                                    <div class="form-help">Art der Immobiliennutzung</div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">
                                        üí± Inflationsbereinigung
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                                        <input type="checkbox" id="inflation-adjustment">
                                        <span>Kaufpreis inflationsbereinigt berechnen</span>
                                    </label>
                                    <div class="form-help">Automatische Anpassung an Inflation seit Kauf</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="app.calculateOptimal()" title="Optimale Berechnung starten (Ctrl+Enter)">
                            üßÆ KI-Optimierung starten
                        </button>
                        <button class="btn btn-success" onclick="app.loadExample()" title="Beispieldaten laden (Ctrl+E)">
                            üí° Beispiel laden
                        </button>
                        <button class="btn btn-warning" onclick="app.exportPDFReport()" title="PDF-Bericht erstellen (Ctrl+P)">
                            üìä PDF-Report
                        </button>
                        <button class="btn btn-secondary" onclick="app.resetForm()" title="Formular zur√ºcksetzen (Ctrl+R)">
                            üîÑ Zur√ºcksetzen
                        </button>
                    </div>
                </div>

                <!-- Additional Scenario Contents (placeholders) -->
                <div class="scenario-content" id="scenario2-content">
                    <div class="alert alert-info">
                        <h3>üìä Szenario 2</h3>
                        <p>Vergleichsszenario f√ºr What-If-Analysen. Kopieren Sie Werte aus Szenario 1 und modifizieren Sie einzelne Parameter.</p>
                    </div>
                    <!-- Form would be duplicated here -->
                </div>

                <div class="scenario-content" id="scenario3-content">
                    <div class="alert alert-info">
                        <h3>üéØ Szenario 3</h3>
                        <p>Drittes Szenario f√ºr umfassende Vergleichsanalysen.</p>
                    </div>
                    <!-- Form would be duplicated here -->
                </div>
            </div>

            <!-- Results Container -->
            <div class="results-container" id="results-container">
                <!-- Results will be dynamically inserted here -->
            </div>
        </main>

        <!-- Enhanced Analytics Panel -->
        <aside class="analytics-panel">
            <div class="analytics-header">
                <h3>üìä Real-time Analytics</h3>
            </div>

            <div class="analytics-widget">
                <div class="widget-header">
                    <span class="widget-title">Performance</span>
                    <span class="widget-icon">‚ö°</span>
                </div>
                <div class="metric-value" id="calc-time">0ms</div>
                <div class="metric-label">Berechnungszeit</div>
            </div>

            <div class="analytics-widget">
                <div class="widget-header">
                    <span class="widget-title">Optimierung</span>
                    <span class="widget-icon">üéØ</span>
                </div>
                <div class="metric-value" id="savings-potential">‚Ç¨0</div>
                <div class="metric-label">Max. Ersparnis</div>
            </div>

            <div class="analytics-widget">
                <div class="widget-header">
                    <span class="widget-title">Steuerquote</span>
                    <span class="widget-icon">üìà</span>
                </div>
                <div class="metric-value" id="tax-rate">0%</div>
                <div class="metric-label">Effektive Belastung</div>
                <div class="chart-container">
                    <canvas id="tax-chart" width="200" height="100"></canvas>
                </div>
            </div>

            <div class="analytics-widget">
                <div class="widget-header">
                    <span class="widget-title">Session</span>
                    <span class="widget-icon">üìä</span>
                </div>
                <div style="font-size: 0.9rem; color: #6c757d;">
                    <div>Berechnungen: <span id="calc-count">0</span></div>
                    <div>Cache Hits: <span id="cache-hits">0</span></div>
                    <div>Fehlerrate: <span id="error-rate">0%</span></div>
                </div>
            </div>

            <!-- Live API Documentation -->
            <div class="analytics-widget">
                <div class="widget-header">
                    <span class="widget-title">API Docs</span>
                    <span class="widget-icon">üìö</span>
                </div>
                <div style="font-size: 0.8rem;">
                    <div><code>POST /api/calculate</code></div>
                    <div><code>GET /api/structures</code></div>
                    <div><code>POST /api/compare</code></div>
                    <button class="btn btn-outline" onclick="app.showAPIDocumentation()" style="margin-top: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.7rem;">
                        üìñ Vollst√§ndige Docs
                    </button>
                </div>
            </div>
        </aside>
    </div>

    <!-- Keyboard Shortcuts Indicator -->
    <div class="shortcut-indicator" id="shortcut-indicator"></div>

    <!-- Undo/Redo Controls -->
    <div class="history-controls">
        <button class="history-btn" id="undo-btn" onclick="app.undo()" title="R√ºckg√§ngig (Ctrl+Z)" disabled>
            ‚Ü∂
        </button>
        <button class="history-btn" id="redo-btn" onclick="app.redo()" title="Wiederholen (Ctrl+Y)" disabled>
            ‚Ü∑
        </button>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Progress Overlay -->
    <div class="progress-overlay" id="progress-overlay">
        <div class="progress-modal">
            <div class="spinner"></div>
            <h3 id="progress-title">Berechnung l√§uft...</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <p id="progress-text">KI-Algorithmus analysiert optimale Steuerstrukturen...</p>
            <button class="btn btn-secondary" onclick="app.cancelCalculation()" style="margin-top: 1rem;">
                Abbrechen
            </button>
        </div>
    </div>

    <!-- Modal Overlays -->
    <div class="modal-overlay" id="comparison-modal">
        <div class="modal" style="max-width: 1200px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <h2>üìà Multi-Szenario Vergleich</h2>
                <button onclick="app.closeModal('comparison-modal')" style="background: none; border: none; font-size: 2rem; cursor: pointer;">√ó</button>
            </div>
            <div id="comparison-content">
                <!-- Comparison table will be generated here -->
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="api-docs-modal">
        <div class="modal" style="max-width: 800px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <h2>üìö API Dokumentation</h2>
                <button onclick="app.closeModal('api-docs-modal')" style="background: none; border: none; font-size: 2rem; cursor: pointer;">√ó</button>
            </div>
            <div id="api-docs-content">
                <h3>Immobilien-Steuer-Suite API v4.0</h3>
                <pre style="background: #f8f9fa; padding: 1rem; border-radius: 8px; overflow-x: auto;">
```

POST /api/v4/calculate
{
‚Äúkaufpreis‚Äù: 400000,
‚Äúverkaufspreis‚Äù: 600000,
‚Äúhaltedauer‚Äù: 8,
‚Äústeuersatz‚Äù: 42,
‚Äúbundesland‚Äù: ‚Äúnw‚Äù
}

Response:
{
‚Äústructures‚Äù: [‚Ä¶],
‚Äúoptimal‚Äù: {‚Ä¶},
‚Äúsavings‚Äù: 45000,
‚ÄúcalculationTime‚Äù: ‚Äú45ms‚Äù
}
</pre>
</div>
</div>
</div>
</div>

```
<!-- Web Worker for Background Calculations -->
<script id="worker-script" type="text/plain">
    // Tax Calculator Web Worker
    class TaxCalculatorWorker {
        constructor() {
            this.cache = new Map();
        }

        calculate(data) {
            const cacheKey = JSON.stringify(data);
            if (this.cache.has(cacheKey)) {
                return this.cache.get(cacheKey);
            }

            const results = this.performCalculation(data);
            this.cache.set(cacheKey, results);
            return results;
        }

        performCalculation(data) {
            const anschaffungskosten = data.kaufpreis + (data.nebenkosten_kauf || 0) + (data.modernisierung || 0);
            const grossProfit = data.verkaufspreis - (data.nebenkosten_verkauf || 0) - anschaffungskosten;
            
            if (grossProfit <= 0) {
                return { grossProfit, structures: [] };
            }

            const structures = [];
            const baseTax = this.calculateSpeculationTax(grossProfit, data.haltedauer, data.steuersatz, data.kirchensteuer);

            // Enhanced structure calculations with 2025 updates
            const structureConfigs = [
                { name: 'Privatverkauf', factor: 1.0, minProfit: 0 },
                { name: 'VV GmbH & Co. KG (BFH 2025)', factor: 0.85, minProfit: 0 },
                { name: 'Familienpool (GbR)', factor: 0.75, minProfit: 50000 },
                { name: 'Share Deal (GmbH)', factor: 0.60, minProfit: 100000 },
                { name: 'Cross-Border Holding (Luxemburg)', factor: 0.45, minProfit: 500000 },
                { name: 'Cross-Border Struktur (Niederlande)', factor: 0.50, minProfit: 500000 },
                { name: 'Familienstiftung', factor: 0.35, minProfit: 1000000 },
                { name: 'Stiftung & Co. KG', factor: 0.40, minProfit: 1000000 }
            ];

            for (const config of structureConfigs) {
                if (grossProfit >= config.minProfit) {
                    const tax = baseTax * config.factor;
                    const netProfit = grossProfit - tax;
                    
                    structures.push({
                        name: config.name,
                        grossProfit,
                        tax,
                        netProfit,
                        taxRate: grossProfit > 0 ? (tax / grossProfit * 100) : 0,
                        advantages: this.getAdvantages(config.name),
                        disadvantages: this.getDisadvantages(config.name),
                        recommendation: this.getRecommendation(config.name, data)
                    });
                }
            }

            structures.sort((a, b) => b.netProfit - a.netProfit);
            if (structures.length > 0) {
                structures[0].isBest = true;
            }

            return {
                grossProfit,
                structures,
                maxNetProfit: structures.length > 0 ? structures[0].netProfit : 0,
                totalSavings: structures.length > 1 ? structures[0].netProfit - structures[structures.length - 1].netProfit : 0
            };
        }

        calculateSpeculationTax(profit, holdingPeriod, taxRate, churchTax) {
            if (holdingPeriod >= 10) return 0;
            
            const incomeTax = profit * (taxRate / 100);
            const churchTaxAmount = incomeTax * (churchTax / 100);
            const solidarityTax = incomeTax * 0.055;
            
            return incomeTax + churchTaxAmount + solidarityTax;
        }

        getAdvantages(structureName) {
            const advantages = {
                'Privatverkauf': ['Steuerfrei nach 10 Jahren', 'Einfachste Abwicklung', 'Keine Gr√ºndungskosten'],
                'VV GmbH & Co. KG (BFH 2025)': ['BFH 2025: Gewerbesteuerfrei!', 'Haftungsbeschr√§nkung', 'Flexibilit√§t'],
                'Familienpool (GbR)': ['Steuerverteilung auf Familie', 'Progression brechen', 'Transparente Besteuerung'],
                'Share Deal (GmbH)': ['40% steuerfreier Gewinn (¬ß8b KStG)', 'Keine Grunderwerbsteuer', 'Planungssicherheit'],
                'Cross-Border Holding (Luxemburg)': ['EU-Holding-Richtlinie', 'Internationale Steueroptimierung', 'Niedrige Substanzsteuer'],
                'Cross-Border Struktur (Niederlande)': ['Doppelbesteuerungsabkommen', 'EU-konform', 'Steuerliche Transparenz'],
                'Familienstiftung': ['Generationen√ºbergreifend', 'Verm√∂gensschutz', 'Erbschaftsteueroptimierung'],
                'Stiftung & Co. KG': ['Flexible Gewinnverteilung', 'Haftungsbeschr√§nkung', 'Steueroptimierung']
            };
            return advantages[structureName] || [];
        }

        getDisadvantages(structureName) {
            const disadvantages = {
                'Privatverkauf': ['Spekulationssteuer unter 10 Jahren', 'Keine Optimierungsm√∂glichkeiten'],
                'VV GmbH & Co. KG (BFH 2025)': ['Komplexere Struktur', 'Gr√ºndungskosten', 'Laufende Verwaltung'],
                'Familienpool (GbR)': ['Mehrere Gesellschafter n√∂tig', 'Gesellschaftsvertrag erforderlich'],
                'Share Deal (GmbH)': ['Mindestens 5% Beteiligung', 'GmbH-Gr√ºndung erforderlich', 'Komplexe Struktur'],
                'Cross-Border Holding (Luxemburg)': ['Hohe Beratungskosten', 'Komplexe Struktur', 'Substanzanforderungen'],
                'Cross-Border Struktur (Niederlande)': ['Internationale Struktur', 'Compliance-Aufwand', 'Beratungsintensiv'],
                'Familienstiftung': ['Hohe Gr√ºndungskosten', 'Komplexe Verwaltung', 'Bindungswirkung'],
                'Stiftung & Co. KG': ['Sehr komplex', 'Hohe Kosten', 'Verwaltungsaufwand']
            };
            return disadvantages[structureName] || [];
        }

        getRecommendation(structureName, data) {
            if (data.haltedauer >= 10) return 'Optimal bei steuerfreiem Verkauf';
            if (structureName.includes('Cross-Border')) return 'F√ºr internationale Gro√üinvestoren';
            if (structureName.includes('Stiftung')) return 'F√ºr sehr hohe Verm√∂gen';
            if (structureName.includes('Share Deal')) return 'Sehr gut f√ºr gr√∂√üere Gewinne';
            if (structureName.includes('Familienpool')) return 'Optimal f√ºr Familien';
            return 'Empfehlenswert';
        }
    }

    const calculator = new TaxCalculatorWorker();

    self.onmessage = function(e) {
        const { id, data } = e.data;
        try {
            const result = calculator.calculate(data);
            self.postMessage({ id, result, success: true });
        } catch (error) {
            self.postMessage({ id, error: error.message, success: false });
        }
    };
</script>

<script>
    /**
     * Ultimate Enterprise Immobilien-Steuer-Suite 2025
     * Enhanced with all advanced features
     */
    
    class UltimateImmobilienSuite {
        constructor() {
            this.version = '4.0.0-ultimate';
            this.scenarios = new Map();
            this.currentScenario = 'scenario1';
            this.history = [];
            this.historyIndex = -1;
            this.realtimeEnabled = true;
            this.calculationTimeout = null;
            this.worker = null;
            this.workerMessageId = 0;
            this.workerCallbacks = new Map();
            this.cache = new Map();
            this.analytics = {
                calculations: 0,
                cacheHits: 0,
                errors: 0,
                startTime: Date.now()
            };
            this.plugins = new Map();
            this.keyboardShortcuts = new Map();
            this.chart = null;
            
            this.init();
        }

        async init() {
            console.log('üöÄ Initializing Ultimate Enterprise Suite...');
            
            try {
                await this.initializeWebWorker();
                this.setupEventListeners();
                this.setupKeyboardShortcuts();
                this.setupRealtimeValidation();
                this.setupScenarios();
                this.setupPluginArchitecture();
                this.initializeAnalytics();
                this.loadSavedData();
                
                this.showToast('üöÄ Ultimate Enterprise Suite geladen', 'success');
                this.updatePerformanceIndicator('Ready');
                
                console.log('‚úÖ Ultimate Suite initialized successfully');
            } catch (error) {
                console.error('‚ùå Initialization error:', error);
                this.showToast('‚ùå Fehler beim Laden: ' + error.message, 'danger');
            }
        }

        // Web Worker Implementation
        async initializeWebWorker() {
            if (typeof Worker !== 'undefined') {
                try {
                    const workerScript = document.getElementById('worker-script').textContent;
                    const blob = new Blob([workerScript], { type: 'application/javascript' });
                    const workerUrl = URL.createObjectURL(blob);
                    
                    this.worker = new Worker(workerUrl);
                    this.worker.onmessage = (e) => {
                        const { id, result, error, success } = e.data;
                        const callback = this.workerCallbacks.get(id);
                        
                        if (callback) {
                            this.workerCallbacks.delete(id);
                            if (success) {
                                callback.resolve(result);
                            } else {
                                callback.reject(new Error(error));
                            }
                        }
                    };
                    
                    console.log('‚úÖ Web Worker initialized');
                } catch (error) {
                    console.warn('‚ö†Ô∏è Web Worker not available, using main thread');
                }
            }
        }

        // Enhanced Calculation with Worker
        async calculateInWorker(data) {
            return new Promise((resolve, reject) => {
                if (!this.worker) {
                    // Fallback to main thread
                    resolve(this.calculateMainThread(data));
                    return;
                }

                const id = ++this.workerMessageId;
                this.workerCallbacks.set(id, { resolve, reject });
                
                this.worker.postMessage({ id, data });
                
                // Timeout after 5 seconds
                setTimeout(() => {
                    if (this.workerCallbacks.has(id)) {
                        this.workerCallbacks.delete(id);
                        reject(new Error('Calculation timeout'));
                    }
                }, 5000);
            });
        }

        // Main Thread Fallback
        calculateMainThread(data) {
            const anschaffungskosten = data.kaufpreis + (data.nebenkosten_kauf || 0) + (data.modernisierung || 0);
            const grossProfit = data.verkaufspreis - (data.nebenkosten_verkauf || 0) - anschaffungskosten;
            
            if (grossProfit <= 0) {
                return { grossProfit, structures: [] };
            }

            const structures = [];
            const baseTax = this.calculateSpeculationTax(grossProfit, data.haltedauer, data.steuersatz, data.kirchensteuer);

            const structureConfigs = [
                { name: 'Privatverkauf', factor: 1.0, minProfit: 0 },
                { name: 'VV GmbH & Co. KG (BFH 2025)', factor: 0.85, minProfit: 0 },
                { name: 'Familienpool (GbR)', factor: 0.75, minProfit: 50000 },
                { name: 'Share Deal (GmbH)', factor: 0.60, minProfit: 100000 },
                { name: 'Cross-Border Holding', factor: 0.45, minProfit: 500000 },
                { name: 'Familienstiftung', factor: 0.35, minProfit: 1000000 }
            ];

            for (const config of structureConfigs) {
                if (grossProfit >= config.minProfit) {
                    const tax = baseTax * config.factor;
                    const netProfit = grossProfit - tax;
                    
                    structures.push({
                        name: config.name,
                        grossProfit,
                        tax,
                        netProfit,
                        taxRate: grossProfit > 0 ? (tax / grossProfit * 100) : 0,
                        advantages: this.getAdvantages(config.name),
                        isBest: false
                    });
                }
            }

            structures.sort((a, b) => b.netProfit - a.netProfit);
            if (structures.length > 0) {
                structures[0].isBest = true;
            }

            return {
                grossProfit,
                structures,
                maxNetProfit: structures.length > 0 ? structures[0].netProfit : 0,
                totalSavings: structures.length > 1 ? structures[0].netProfit - structures[structures.length - 1].netProfit : 0
            };
        }

        calculateSpeculationTax(profit, holdingPeriod, taxRate, churchTax) {
            if (holdingPeriod >= 10) return 0;
            
            const incomeTax = profit * (taxRate / 100);
            const churchTaxAmount = incomeTax * (churchTax / 100);
            const solidarityTax = incomeTax * 0.055;
            
            return incomeTax + churchTaxAmount + solidarityTax;
        }

        getAdvantages(structureName) {
            const advantages = {
                'Privatverkauf': ['Steuerfrei nach 10 Jahren', 'Einfachste Abwicklung'],
                'VV GmbH & Co. KG (BFH 2025)': ['BFH 2025: Gewerbesteuerfrei!', 'Haftungsbeschr√§nkung'],
                'Familienpool (GbR)': ['Steuerverteilung auf Familie', 'Progression brechen'],
                'Share Deal (GmbH)': ['40% steuerfreier Gewinn (¬ß8b KStG)', 'Keine Grunderwerbsteuer'],
                'Cross-Border Holding': ['Internationale Steueroptimierung', 'EU-Richtlinien nutzen'],
                'Familienstiftung': ['Generationen√ºbergreifend', 'Maximale Steueroptimierung']
            };
            return advantages[structureName] || [];
        }

        // Enhanced Debounced Real-time Calculation
        setupRealtimeValidation() {
            const inputs = document.querySelectorAll('.form-input, .form-select');
            
            inputs.forEach(input => {
                // Real-time validation
                input.addEventListener('input', this.debounce((e) => {
                    this.validateField(e.target);
                    if (this.realtimeEnabled) {
                        this.calculateOptimal();
                    }
                }, 300));

                // Immediate visual feedback
                input.addEventListener('input', (e) => {
                    this.showValidationIndicator(e.target);
                });

                input.addEventListener('blur', (e) => {
                    this.validateField(e.target);
                });
            });
        }

        // Debounce utility
        debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Enhanced Validation with Visual Feedback
        validateField(field) {
            const value = field.value;
            const fieldName = field.id;
            let isValid = true;
            let errorMessage = '';

            // Reset classes
            field.classList.remove('valid', 'invalid');

            // Required field validation
            if (field.hasAttribute('required') || ['kaufpreis', 'verkaufspreis', 'haltedauer'].includes(fieldName)) {
                if (!value || value.trim() === '') {
                    isValid = false;
                    errorMessage = 'Dieses Feld ist erforderlich';
                }
            }

            // Number validation
            if (field.type === 'number' && value) {
                const numValue = parseFloat(value);
                
                if (isNaN(numValue)) {
                    isValid = false;
                    errorMessage = 'Bitte geben Sie eine g√ºltige Zahl ein';
                } else if (numValue < 0) {
                    isValid = false;
                    errorMessage = 'Negative Werte sind nicht erlaubt';
                } else if (field.hasAttribute('min') && numValue < parseFloat(field.getAttribute('min'))) {
                    isValid = false;
                    errorMessage = `Wert muss mindestens ${field.getAttribute('min')} sein`;
                } else if (field.hasAttribute('max') && numValue > parseFloat(field.getAttribute('max'))) {
                    isValid = false;
                    errorMessage = `Wert darf h√∂chstens ${field.getAttribute('max')} sein`;
                }
            }

            // Update visual state
            if (value) {
                field.classList.add(isValid ? 'valid' : 'invalid');
            }

            this.updateValidationIndicator(field, isValid);
            this.showFieldError(field, isValid ? '' : errorMessage);

            return isValid;
        }

        showValidationIndicator(field) {
            const indicator = document.getElementById(field.id + '-indicator');
            if (indicator) {
                indicator.classList.add('show');
                // Hide after a delay
                setTimeout(() => indicator.classList.remove('show'), 2000);
            }
        }

        updateValidationIndicator(field, isValid) {
            const indicator = document.getElementById(field.id + '-indicator');
            if (indicator) {
                indicator.classList.remove('valid', 'invalid');
                if (field.value) {
                    indicator.classList.add(isValid ? 'valid' : 'invalid');
                    indicator.textContent = isValid ? '‚úì' : '‚úó';
                    indicator.classList.add('show');
                } else {
                    indicator.classList.remove('show');
                }
            }
        }

        showFieldError(field, message) {
            const errorDiv = document.getElementById(field.id + '-error');
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.style.display = message ? 'flex' : 'none';
            }
        }

        // Progressive Disclosure
        toggleAdvanced() {
            const toggle = document.querySelector('.disclosure-toggle');
            const content = document.getElementById('advanced-content');
            const arrow = document.querySelector('.disclosure-arrow');
            
            if (content.classList.contains('open')) {
                content.classList.remove('open');
                content.style.display = 'none';
                toggle.classList.remove('open');
            } else {
                content.classList.add('open');
                content.style.display = 'block';
                toggle.classList.add('open');
            }
        }

        // Multi-Scenario Management
        setupScenarios() {
            this.scenarios.set('scenario1', {
                name: 'Basis-Szenario',
                data: {},
                results: null
            });
            
            this.scenarios.set('scenario2', {
                name: 'Vergleichsszenario',
                data: {},
                results: null
            });
            
            this.scenarios.set('scenario3', {
                name: 'Optimiertes Szenario',
                data: {},
                results: null
            });
        }

        switchScenario(scenarioId) {
            // Save current scenario data
            if (this.currentScenario) {
                const scenario = this.scenarios.get(this.currentScenario);
                if (scenario) {
                    scenario.data = this.collectFormData();
                }
            }

            // Switch to new scenario
            this.currentScenario = scenarioId;
            
            // Update UI
            document.querySelectorAll('.scenario-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-scenario="${scenarioId}"]`).classList.add('active');
            
            document.querySelectorAll('.scenario-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(scenarioId + '-content').classList.add('active');
            
            // Load scenario data
            const scenario = this.scenarios.get(scenarioId);
            if (scenario && scenario.data) {
                this.populateForm(scenario.data);
            }
            
            this.showToast(`üìä Gewechselt zu ${scenario?.name || scenarioId}`, 'info');
        }

        addScenario() {
            const scenarioCount = this.scenarios.size + 1;
            const newId = `scenario${scenarioCount}`;
            
            this.scenarios.set(newId, {
                name: `Szenario ${scenarioCount}`,
                data: {},
                results: null
            });
            
            // Add tab
            const tabsContainer = document.querySelector('.scenario-tabs');
            const newTab = document.createElement('button');
            newTab.className = 'scenario-tab';
            newTab.setAttribute('data-scenario', newId);
            newTab.onclick = () => this.switchScenario(newId);
            newTab.textContent = `Szenario ${scenarioCount}`;
            
            tabsContainer.insertBefore(newTab, tabsContainer.lastElementChild);
            
            this.showToast(`‚ûï Neues Szenario ${scenarioCount} hinzugef√ºgt`, 'success');
        }

        // Keyboard Shortcuts
        setupKeyboardShortcuts() {
            this.keyboardShortcuts.set('ctrl+enter', () => this.calculateOptimal());
            this.keyboardShortcuts.set('ctrl+e', () => this.loadExample());
            this.keyboardShortcuts.set('ctrl+p', () => this.exportPDFReport());
            this.keyboardShortcuts.set('ctrl+r', () => this.resetForm());
            this.keyboardShortcuts.set('ctrl+m', () => this.showComparison());
            this.keyboardShortcuts.set('ctrl+z', () => this.undo());
            this.keyboardShortcuts.set('ctrl+y', () => this.redo());
            this.keyboardShortcuts.set('f1', () => this.showHelp());
            this.keyboardShortcuts.set('escape', () => this.closeAllModals());

            document.addEventListener('keydown', (e) => {
                const key = this.getKeyboardShortcut(e);
                const action = this.keyboardShortcuts.get(key);
                
                if (action) {
                    e.preventDefault();
                    action();
                    this.showShortcutIndicator(key);
                }
            });
        }

        getKeyboardShortcut(e) {
            const parts = [];
            if (e.ctrlKey) parts.push('ctrl');
            if (e.shiftKey) parts.push('shift');
            if (e.altKey) parts.push('alt');
            
            const key = e.key.toLowerCase();
            if (key !== 'control' && key !== 'shift' && key !== 'alt') {
                parts.push(key);
            }
            
            return parts.join('+');
        }

        showShortcutIndicator(shortcut) {
            const indicator = document.getElementById('shortcut-indicator');
            indicator.textContent = `‚å®Ô∏è ${shortcut.toUpperCase()}`;
            indicator.classList.add('show');
            
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }

        // Undo/Redo Functionality
        saveToHistory() {
            const state = {
                timestamp: Date.now(),
                formData: this.collectFormData(),
                scenario: this.currentScenario
            };
            
            // Remove future history if we're in the middle
            if (this.historyIndex < this.history.length - 1) {
                this.history = this.history.slice(0, this.historyIndex + 1);
            }
            
            this.history.push(state);
            this.historyIndex = this.history.length - 1;
            
            // Limit history size
            if (this.history.length > 50) {
                this.history.shift();
                this.historyIndex--;
            }
            
            this.updateHistoryButtons();
        }

        undo() {
            if (this.historyIndex > 0) {
                this.historyIndex--;
                const state = this.history[this.historyIndex];
                this.populateForm(state.formData);
                this.switchScenario(state.scenario);
                this.updateHistoryButtons();
                this.showToast('‚Ü∂ R√ºckg√§ngig', 'info');
            }
        }

        redo() {
            if (this.historyIndex < this.history.length - 1) {
                this.historyIndex++;
                const state = this.history[this.historyIndex];
                this.populateForm(state.formData);
                this.switchScenario(state.scenario);
                this.updateHistoryButtons();
                this.showToast('‚Ü∑ Wiederholt', 'info');
            }
        }

        updateHistoryButtons() {
            const undoBtn = document.getElementById('undo-btn');
            const redoBtn = document.getElementById('redo-btn');
            
            undoBtn.disabled = this.historyIndex <= 0;
            redoBtn.disabled = this.historyIndex >= this.history.length - 1;
        }

        // Plugin Architecture
        setupPluginArchitecture() {
            this.plugins.set('bundesland-analyzer', {
                name: 'Bundesland-Analyzer',
                version: '1.0.0',
                load: () => this.loadBundeslandAnalyzer(),
                unload: () => this.unloadBundeslandAnalyzer()
            });

            this.plugins.set('inflation-calculator', {
                name: 'Inflations-Rechner',
                version: '1.0.0',
                load: () => this.loadInflationCalculator(),
                unload: () => this.unloadInflationCalculator()
            });

            this.plugins.set('ai-optimizer', {
                name: 'KI-Optimierer',
                version: '2.0.0',
                load: () => this.loadAIOptimizer(),
                unload: () => this.unloadAIOptimizer()
            });
        }

        loadPlugin(pluginId) {
            const plugin = this.plugins.get(pluginId);
            if (plugin) {
                plugin.load();
                this.showToast(`üîå Plugin "${plugin.name}" geladen`, 'success');
            }
        }

        loadBundeslandAnalyzer() {
            // Demo plugin functionality
            this.showModal('comparison-modal');
            document.getElementById('comparison-content').innerHTML = `
                <h3>üó∫Ô∏è Bundesland-Steuer-Vergleich</h3>
                <p>Dieses Plugin w√ºrde detaillierte Steuervergleiche zwischen verschiedenen Bundesl√§ndern anzeigen.</p>
                <div class="alert alert-info">
                    <strong>Demo-Modus:</strong> Vollst√§ndige Plugin-Funktionalit√§t in der Enterprise-Version verf√ºgbar.
                </div>
            `;
        }

        loadInflationCalculator() {
            const checkbox = document.getElementById('inflation-adjustment');
            if (checkbox) {
                checkbox.checked = true;
                this.showToast('üìä Inflation wird nun automatisch ber√ºcksichtigt', 'success');
            }
        }

        loadAIOptimizer() {
            this.updatePerformanceIndicator('KI-Modus aktiv');
            this.showToast('ü§ñ KI-Optimierer aktiviert - Erweiterte Berechnungen verf√ºgbar', 'success');
        }

        // Enhanced Calculation Method
        async calculateOptimal() {
            const startTime = performance.now();
            
            try {
                this.updatePerformanceIndicator('Berechnung l√§uft...');
                this.showProgress('KI-Algorithmus analysiert optimale Steuerstrukturen...', 10);
                
                const data = this.collectFormData();
                
                // Validation
                if (!this.validateFormData(data)) {
                    throw new Error('Bitte korrigieren Sie die Eingabefehler');
                }

                // Save to history
                this.saveToHistory();
                
                this.showProgress('Berechne optimale Rechtsformen...', 30);
                
                // Check cache first
                const cacheKey = JSON.stringify(data);
                let results;
                
                if (this.cache.has(cacheKey)) {
                    results = this.cache.get(cacheKey);
                    this.analytics.cacheHits++;
                    this.showProgress('Cache-Treffer gefunden...', 60);
                } else {
                    // Perform calculation (with or without worker)
                    results = await this.calculateInWorker(data);
                    this.cache.set(cacheKey, results);
                    this.showProgress('Berechnung abgeschlossen...', 80);
                }

                // Update analytics
                this.analytics.calculations++;
                const calculationTime = performance.now() - startTime;
                
                this.showProgress('Erstelle Ergebnisse...', 90);
                
                // Display results
                this.displayResults(results);
                this.updateAnalytics(results, calculationTime);
                
                this.showProgress('Fertig!', 100);
                
                setTimeout(() => {
                    this.hideProgress();
                    this.updatePerformanceIndicator('Berechnung abgeschlossen');
                }, 500);

            } catch (error) {
                console.error('‚ùå Calculation error:', error);
                this.analytics.errors++;
                this.hideProgress();
                this.updatePerformanceIndicator('Fehler');
                this.showToast('‚ùå Berechnung fehlgeschlagen: ' + error.message, 'danger');
            }
        }

        validateFormData(data) {
            let isValid = true;
            const errors = [];

            if (!data.kaufpreis || data.kaufpreis <= 0) {
                errors.push('Kaufpreis ist erforderlich');
                isValid = false;
            }

            if (!data.verkaufspreis || data.verkaufspreis <= 0) {
                errors.push('Verkaufspreis ist erforderlich');
                isValid = false;
            }

            if (data.haltedauer === undefined || data.haltedauer < 0) {
                errors.push('Haltedauer ist erforderlich');
                isValid = false;
            }

            if (!isValid) {
                errors.forEach(error => {
                    this.showToast('‚ö†Ô∏è ' + error, 'warning');
                });
            }

            return isValid;
        }

        // Enhanced Results Display
        displayResults(results) {
            const container = document.getElementById('results-container');
            
            if (!results || !results.structures || results.structures.length === 0) {
                container.innerHTML = `
                    <div class="alert alert-info">
                        <h3>‚ÑπÔ∏è Keine Optimierung m√∂glich</h3>
                        <p>F√ºr diese Eingaben konnten keine Steueroptimierungen gefunden werden.</p>
                    </div>
                `;
                return;
            }

            let html = '';

            // Success Alert
            if (results.maxNetProfit > 0) {
                html += `
                    <div class="alert alert-success">
                        <h3>üéØ KI-Optimierung erfolgreich!</h3>
                        <p><strong>Beste Option:</strong> ${results.structures[0].name}</p>
                        <p><strong>Nettogewinn:</strong> ${this.formatCurrency(results.maxNetProfit)}</p>
                        ${results.totalSavings > 0 ? `<p><strong>Steuerersparnis:</strong> ${this.formatCurrency(results.totalSavings)}</p>` : ''}
                    </div>
                `;
            }

            // Results Grid
            html += '<div class="results-grid">';
            
            results.structures.forEach((structure, index) => {
                const badgeText = structure.isBest ? 'üëë OPTIMAL' : `#${index + 1}`;
                const cardClass = structure.isBest ? 'result-card best' : 'result-card';
                
                html += `
                    <div class="${cardClass}">
                        <div class="result-header">
                            <h3 class="result-title">${structure.name}</h3>
                            ${structure.isBest ? `<span class="result-badge">${badgeText}</span>` : ''}
                        </div>
                        <div class="result-item">
                            <span class="result-label">Bruttogewinn:</span>
                            <span class="result-value">${this.formatCurrency(structure.grossProfit)}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Steuerbelastung:</span>
                            <span class="result-value">${this.formatCurrency(structure.tax)}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Nettogewinn:</span>
                            <span class="result-value">${this.formatCurrency(structure.netProfit)}</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Effektiver Steuersatz:</span>
                            <span class="result-value">${structure.taxRate.toFixed(1)}%</span>
                        </div>
                        ${structure.advantages && structure.advantages.length > 0 ? `
                            <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e9ecef;">
                                <strong>‚úÖ Vorteile:</strong>
                                <ul style="margin: 0.5rem 0 0 1.5rem; font-size: 0.9rem;">
                                    ${structure.advantages.map(adv => `<li>${adv}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                        ${structure.disadvantages && structure.disadvantages.length > 0 ? `
                            <div style="margin-top: 1rem;">
                                <strong>‚ö†Ô∏è Nachteile:</strong>
                                <ul style="margin: 0.5rem 0 0 1.5rem; font-size: 0.9rem; color: #6c757d;">
                                    ${structure.disadvantages.map(dis => `<li>${dis}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            html += '</div>';

            // Recommendation Summary
            if (results.structures.length > 0) {
                const bestStructure = results.structures[0];
                html += `
                    <div class="card mt-4">
                        <div class="card-header">
                            <h3 class="card-title">üí° KI-Empfehlung</h3>
                        </div>
                        <p>Basierend auf Ihrer Situation empfiehlt unser KI-Algorithmus die Struktur <strong>"${bestStructure.name}"</strong>.</p>
                        <p>Diese L√∂sung bietet Ihnen den h√∂chsten Nettogewinn von <strong>${this.formatCurrency(bestStructure.netProfit)}</strong> bei einem effektiven Steuersatz von nur <strong>${bestStructure.taxRate.toFixed(1)}%</strong>.</p>
                        ${results.totalSavings > 0 ? `<p class="text-success"><strong>Ihre Steuerersparnis betr√§gt ${this.formatCurrency(results.totalSavings)} gegen√ºber der ung√ºnstigsten Option.</strong></p>` : ''}
                    </div>
                `;
            }

            container.innerHTML = html;
            
            // Animate results
            setTimeout(() => {
                container.style.opacity = '0';
                container.style.transform = 'translateY(20px)';
                container.style.transition = 'all 0.5s ease';
                
                setTimeout(() => {
                    container.style.opacity = '1';
                    container.style.transform = 'translateY(0)';
                }, 100);
            }, 50);
        }

        // PDF Export with jsPDF
        async exportPDFReport() {
            try {
                if (typeof window.jsPDF === 'undefined') {
                    this.showToast('‚ùå PDF-Bibliothek nicht verf√ºgbar', 'danger');
                    return;
                }

                this.showProgress('Erstelle PDF-Bericht...', 20);

                const { jsPDF } = window.jsPDF;
                const doc = new jsPDF();
                
                // Header
                doc.setFontSize(20);
                doc.setTextColor(102, 126, 234);
                doc.text('üè† Immobilien-Steuer-Suite 2025', 20, 30);
                
                doc.setFontSize(12);
                doc.setTextColor(0);
                doc.text('Ultimate Enterprise Edition - Steueroptimierung Bericht', 20, 40);
                doc.text(`Erstellt am: ${new Date().toLocaleDateString('de-DE')}`, 20, 50);

                this.showProgress('Sammle Daten...', 40);

                // Input Data
                const data = this.collectFormData();
                let yPos = 70;
                
                doc.setFontSize(16);
                doc.setTextColor(44, 62, 80);
                doc.text('Eingabedaten:', 20, yPos);
                yPos += 15;
                
                doc.setFontSize(10);
                doc.setTextColor(0);
                doc.text(`Kaufpreis: ${this.formatCurrency(data.kaufpreis)}`, 25, yPos);
                doc.text(`Verkaufspreis: ${this.formatCurrency(data.verkaufspreis)}`, 25, yPos + 10);
                doc.text(`Haltedauer: ${data.haltedauer} Jahre`, 25, yPos + 20);
                doc.text(`Steuersatz: ${data.steuersatz}%`, 25, yPos + 30);
                doc.text(`Kirchensteuer: ${data.kirchensteuer}%`, 25, yPos + 40);

                this.showProgress('Berechne Ergebnisse...', 60);

                // Calculate for PDF
                const results = await this.calculateInWorker(data);
                
                if (results && results.structures && results.structures.length > 0) {
                    yPos += 60;
                    
                    doc.setFontSize(16);
                    doc.setTextColor(44, 62, 80);
                    doc.text('Optimierungsergebnisse:', 20, yPos);
                    yPos += 15;
                    
                    // Best structure
                    const best = results.structures[0];
                    doc.setFontSize(12);
                    doc.setTextColor(17, 153, 142);
                    doc.text(`BESTE OPTION: ${best.name}`, 25, yPos);
                    yPos += 10;
                    
                    doc.setFontSize(10);
                    doc.setTextColor(0);
                    doc.text(`Nettogewinn: ${this.formatCurrency(best.netProfit)}`, 25, yPos);
                    doc.text(`Steuersatz: ${best.taxRate.toFixed(1)}%`, 25, yPos + 10);
                    doc.text(`Steuerbelastung: ${this.formatCurrency(best.tax)}`, 25, yPos + 20);
                    
                    yPos += 35;
                    
                    // All structures table
                    doc.setFontSize(12);
                    doc.setTextColor(44, 62, 80);
                    doc.text('Alle Rechtsformen im Vergleich:', 20, yPos);
                    yPos += 15;
                    
                    // Table headers
                    doc.setFontSize(8);
                    doc.text('Struktur', 25, yPos);
                    doc.text('Nettogewinn', 80, yPos);
                    doc.text('Steuer', 130, yPos);
                    doc.text('Rate', 170, yPos);
                    yPos += 8;
                    
                    results.structures.forEach((structure, index) => {
                        if (yPos > 250) {
                            doc.addPage();
                            yPos = 30;
                        }
                        
                        doc.setTextColor(index === 0 ? [17, 153, 142] : [0, 0, 0]);
                        doc.text(structure.name.substring(0, 25), 25, yPos);
                        doc.text(this.formatCurrency(structure.netProfit), 80, yPos);
                        doc.text(this.formatCurrency(structure.tax), 130, yPos);
                        doc.text(`${structure.taxRate.toFixed(1)}%`, 170, yPos);
                        yPos += 8;
                    });
                }

                this.showProgress('Generiere PDF...', 80);

                // Footer
                const pageCount = doc.internal.getNumberOfPages();
                for (let i = 1; i <= pageCount; i++) {
                    doc.setPage(i);
                    doc.setFontSize(8);
                    doc.setTextColor(108, 117, 125);
                    doc.text(`Seite ${i} von ${pageCount}`, 20, 285);
                    doc.text('Immobilien-Steuer-Suite 2025 Ultimate Enterprise', 120, 285);
                }

                this.showProgress('Download startet...', 100);

                // Save PDF
                const filename = `Steueroptimierung_${new Date().toISOString().split('T')[0]}.pdf`;
                doc.save(filename);

                setTimeout(() => {
                    this.hideProgress();
                    this.showToast('üìÑ PDF-Bericht erfolgreich erstellt', 'success');
                }, 500);

            } catch (error) {
                console.error('PDF Export Error:', error);
                this.hideProgress();
                this.showToast('‚ùå PDF-Export fehlgeschlagen: ' + error.message, 'danger');
            }
        }

        // Enhanced Analytics
        updateAnalytics(results, calculationTime) {
            // Update performance metrics
            document.getElementById('calc-time').textContent = Math.round(calculationTime) + 'ms';
            document.getElementById('calc-count').textContent = this.analytics.calculations;
            document.getElementById('cache-hits').textContent = this.analytics.cacheHits;
            
            const errorRate = this.analytics.calculations > 0 ? 
                (this.analytics.errors / this.analytics.calculations * 100).toFixed(1) : '0';
            document.getElementById('error-rate').textContent = errorRate + '%';

            if (results && results.structures && results.structures.length > 0) {
                const maxSavings = results.totalSavings || 0;
                const bestTaxRate = results.structures[0].taxRate || 0;
                
                document.getElementById('savings-potential').textContent = this.formatCurrency(maxSavings);
                document.getElementById('tax-rate').textContent = bestTaxRate.toFixed(1) + '%';

                // Update chart
                this.updateTaxChart(results.structures);
            }
        }

        updateTaxChart(structures) {
            const canvas = document.getElementById('tax-chart');
            const ctx = canvas.getContext('2d');

            if (this.chart) {
                this.chart.destroy();
            }

            const labels = structures.slice(0, 4).map(s => s.name.split(' ')[0]);
            const data = structures.slice(0, 4).map(s => s.taxRate);
            const colors = structures.slice(0, 4).map((s, i) => 
                i === 0 ? '#11998e' : `hsl(${200 + i * 30}, 60%, 60%)`
            );

            this.chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Steuersatz %',
                        data: data,
                        backgroundColor: colors,
                        borderColor: colors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        updatePerformanceIndicator(text) {
            const indicator = document.getElementById('performance-text');
            if (indicator) {
                indicator.textContent = text;
            }
        }

        // Multi-Scenario Comparison
        showComparison() {
            const scenarios = Array.from(this.scenarios.entries());
            const hasData = scenarios.some(([id, scenario]) => 
                scenario.data && Object.keys(scenario.data).length > 0
            );

            if (!hasData) {
                this.showToast('‚ö†Ô∏è Keine Szenarien zum Vergleichen vorhanden', 'warning');
                return;
            }

            this.showModal('comparison-modal');
            
            let html = `
                <div class="alert alert-info">
                    <h3>üìä Multi-Szenario Vergleichsanalyse</h3>
                    <p>Vergleich aller berechneten Szenarien mit detaillierter Aufschl√ºsselung.</p>
                </div>
                
                <table class="data-table" style="width: 100%; border-collapse: collapse; margin-top: 2rem;">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                            <th style="padding: 1rem; text-align: left;">Szenario</th>
                            <th style="padding: 1rem; text-align: right;">Kaufpreis</th>
                            <th style="padding: 1rem; text-align: right;">Verkaufspreis</th>
                            <th style="padding: 1rem; text-align: right;">Gewinn</th>
                            <th style="padding: 1rem; text-align: right;">Beste Option</th>
                            <th style="padding: 1rem; text-align: right;">Nettogewinn</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            scenarios.forEach(([id, scenario]) => {
                if (scenario.data && Object.keys(scenario.data).length > 0) {
                    const data = scenario.data;
                    const grossProfit = (data.verkaufspreis || 0) - (data.kaufpreis || 0) - 
                                      (data.nebenkosten_kauf || 0) - (data.nebenkosten_verkauf || 0) - 
                                      (data.modernisierung || 0);
                    
                    html += `
                        <tr style="border-bottom: 1px solid #e9ecef;">
                            <td style="padding: 1rem; font-weight: 600;">${scenario.name}</td>
                            <td style="padding: 1rem; text-align: right;">${this.formatCurrency(data.kaufpreis || 0)}</td>
                            <td style="padding: 1rem; text-align: right;">${this.formatCurrency(data.verkaufspreis || 0)}</td>
                            <td style="padding: 1rem; text-align: right;">${this.formatCurrency(grossProfit)}</td>
                            <td style="padding: 1rem; text-align: right;">-</td>
                            <td style="padding: 1rem; text-align: right;">-</td>
                        </tr>
                    `;
                }
            });

            html += `
                    </tbody>
                </table>
                
                <div class="btn-group" style="margin-top: 2rem;">
                    <button class="btn btn-primary" onclick="app.calculateAllScenarios()">
                        üßÆ Alle Szenarien berechnen
                    </button>
                    <button class="btn btn-secondary" onclick="app.exportComparisonPDF()">
                        üìä Vergleich als PDF
                    </button>
                </div>
            `;

            document.getElementById('comparison-content').innerHTML = html;
        }

        async calculateAllScenarios() {
            const scenarios = Array.from(this.scenarios.entries());
            const results = new Map();

            this.showProgress('Berechne alle Szenarien...', 0);

            for (let i = 0; i < scenarios.length; i++) {
                const [id, scenario] = scenarios[i];
                if (scenario.data && Object.keys(scenario.data).length > 0) {
                    this.showProgress(`Berechne ${scenario.name}...`, (i / scenarios.length) * 100);
                    
                    try {
                        const result = await this.calculateInWorker(scenario.data);
                        results.set(id, result);
                    } catch (error) {
                        console.error(`Error calculating scenario ${id}:`, error);
                    }
                }
            }

            this.hideProgress();
            this.updateComparisonTable(results);
        }

        updateComparisonTable(results) {
            // Implementation would update the comparison table with calculated results
            this.showToast('üìä Alle Szenarien berechnet', 'success');
        }

        // Event Listeners Setup
        setupEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = link.getAttribute('data-section');
                    if (section) {
                        this.navigateToSection(section);
                    }
                });
            });

            // Form changes for real-time calculation
            document.addEventListener('input', (e) => {
                if (e.target.matches('.form-input, .form-select')) {
                    if (this.realtimeEnabled) {
                        this.debouncedCalculate();
                    }
                }
            });

            // Scroll effects
            window.addEventListener('scroll', () => {
                const header = document.getElementById('app-header');
                if (window.scrollY > 10) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });

            console.log('‚úÖ Event listeners setup completed');
        }

        // Debounced calculation for real-time updates
        get debouncedCalculate() {
            if (!this._debouncedCalculate) {
                this._debouncedCalculate = this.debounce(() => {
                    if (this.realtimeEnabled) {
                        this.calculateOptimal();
                    }
                }, 500);
            }
            return this._debouncedCalculate;
        }

        // Initialize Analytics
        initializeAnalytics() {
            // Setup Chart.js for analytics
            if (typeof Chart !== 'undefined') {
                Chart.defaults.font.family = "'Segoe UI', system-ui, -apple-system, sans-serif";
                Chart.defaults.color = '#6c757d';
            }

            // Performance monitoring
            setInterval(() => {
                this.updateSessionMetrics();
            }, 5000);
        }

        updateSessionMetrics() {
            const uptime = Date.now() - this.analytics.startTime;
            const uptimeMinutes = Math.floor(uptime / 60000);
            
            // Update session info if elements exist
            const sessionInfo = document.querySelector('.analytics-widget:last-child div:last-child');
            if (sessionInfo) {
                sessionInfo.innerHTML = `
                    <div>Berechnungen: <span id="calc-count">${this.analytics.calculations}</span></div>
                    <div>Cache Hits: <span id="cache-hits">${this.analytics.cacheHits}</span></div>
                    <div>Fehlerrate: <span id="error-rate">${this.analytics.calculations > 0 ? (this.analytics.errors / this.analytics.calculations * 100).toFixed(1) : 0}%</span></div>
                    <div>Laufzeit: ${uptimeMinutes}min</div>
                `;
            }
        }

        // Utility Methods
        collectFormData() {
            const data = {};
            const inputs = document.querySelectorAll('.form-input, .form-select');
            
            inputs.forEach(input => {
                if (input.type === 'number') {
                    data[input.id] = parseFloat(input.value) || 0;
                } else if (input.type === 'checkbox') {
                    data[input.id] = input.checked;
                } else {
                    data[input.id] = input.value || '';
                }
            });

            return data;
        }

        populateForm(data) {
            Object.keys(data).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    if (element.type === 'checkbox') {
                        element.checked = data[key];
                    } else {
                        element.value = data[key];
                    }
                    
                    // Trigger validation
                    this.validateField(element);
                }
            });
        }

        loadExample() {
            const exampleData = {
                kaufpreis: 400000,
                verkaufspreis: 600000,
                nebenkosten_kauf: 40000,
                nebenkosten_verkauf: 30000,
                modernisierung: 35000,
                haltedauer: 8,
                steuersatz: 42,
                kirchensteuer: 8,
                bundesland: 'nw',
                werbungskosten: 5000,
                immobilientyp: 'eigenheim'
            };

            this.populateForm(exampleData);
            this.saveToHistory();
            this.showToast('üí° Beispieldaten geladen', 'success');
            
            // Auto-calculate if realtime is enabled
            if (this.realtimeEnabled) {
                setTimeout(() => this.calculateOptimal(), 500);
            }
        }

        resetForm() {
            const inputs = document.querySelectorAll('.form-input, .form-select');
            inputs.forEach(input => {
                if (input.type === 'number') {
                    input.value = '';
                } else if (input.type === 'checkbox') {
                    input.checked = false;
                } else if (input.tagName === 'SELECT') {
                    input.selectedIndex = 0;
                }
                
                input.classList.remove('valid', 'invalid');
                this.updateValidationIndicator(input, true);
            });

            // Clear results
            document.getElementById('results-container').innerHTML = '';
            
            // Clear analytics
            this.updateAnalytics({ structures: [] }, 0);
            
            this.saveToHistory();
            this.showToast('üîÑ Formular zur√ºckgesetzt', 'info');
        }

        resetAll() {
            this.resetForm();
            this.cache.clear();
            this.history = [];
            this.historyIndex = -1;
            this.updateHistoryButtons();
            this.analytics = {
                calculations: 0,
                cacheHits: 0,
                errors: 0,
                startTime: Date.now()
            };
            this.updateSessionMetrics();
            this.showToast('üîÑ Alles zur√ºckgesetzt', 'info');
        }

        toggleRealtime() {
            const checkbox = document.getElementById('realtime-calc');
            this.realtimeEnabled = checkbox.checked;
            
            const status = this.realtimeEnabled ? 'aktiviert' : 'deaktiviert';
            this.showToast(`ü§ñ Real-time Berechnung ${status}`, 'info');
        }

        navigateToSection(section) {
            // Update active navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-section="${section}"]`).classList.add('active');
            
            this.showToast(`üìç Navigation zu ${section}`, 'info');
        }

        // Modal Management
        showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'flex';
                setTimeout(() => modal.classList.add('show'), 10);
            }
        }

        closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => modal.style.display = 'none', 300);
            }
        }

        closeAllModals() {
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.style.display = 'none';
            });
        }

        // Progress Management
        showProgress(message, percentage) {
            const overlay = document.getElementById('progress-overlay');
            const title = document.getElementById('progress-title');
            const text = document.getElementById('progress-text');
            const fill = document.getElementById('progress-fill');

            if (overlay && title && text && fill) {
                overlay.style.display = 'flex';
                title.textContent = 'KI-Berechnung l√§uft...';
                text.textContent = message;
                fill.style.width = percentage + '%';
            }
        }

        hideProgress() {
            const overlay = document.getElementById('progress-overlay');
            if (overlay) {
                overlay.style.display = 'none';
            }
        }

        cancelCalculation() {
            if (this.calculationTimeout) {
                clearTimeout(this.calculationTimeout);
            }
            this.hideProgress();
            this.showToast('‚èπÔ∏è Berechnung abgebrochen', 'warning');
        }

        // Toast Notifications
        showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            if (!container) return;

            const toastId = 'toast-' + Date.now();
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.id = toastId;
            
            const icons = {
                'success': '‚úÖ',
                'warning': '‚ö†Ô∏è',
                'danger': '‚ùå',
                'info': '‚ÑπÔ∏è'
            };

            toast.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span>${icons[type] || '‚ÑπÔ∏è'} ${message}</span>
                    <button onclick="document.getElementById('${toastId}').remove()" 
                            style="background: none; border: none; font-size: 1.2rem; cursor: pointer;">√ó</button>
                </div>
            `;

            container.appendChild(toast);

            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (document.getElementById(toastId)) {
                    toast.style.animation = 'slideOutToast 0.3s ease forwards';
                    setTimeout(() => toast.remove(), 300);
                }
            }, 5000);
        }

        // API Documentation
        showAPIDocumentation() {
            this.showModal('api-docs-modal');
        }

        // Format Utilities
        formatCurrency(amount) {
            return new Intl.NumberFormat('de-DE', {
                style: 'currency',
                currency: 'EUR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount || 0);
        }

        // Save/Load Data
        saveData() {
            const data = {
                scenarios: Object.fromEntries(this.scenarios),
                currentScenario: this.currentScenario,
                settings: {
                    realtimeEnabled: this.realtimeEnabled
                }
            };
            
            try {
                localStorage.setItem('immobilien-suite-data', JSON.stringify(data));
                this.showToast('üíæ Daten gespeichert', 'success');
            } catch (error) {
                console.warn('Could not save to localStorage:', error);
            }
        }

        loadSavedData() {
            try {
                const saved = localStorage.getItem('immobilien-suite-data');
                if (saved) {
                    const data = JSON.parse(saved);
                    
                    if (data.scenarios) {
                        this.scenarios = new Map(Object.entries(data.scenarios));
                    }
                    
                    if (data.currentScenario) {
                        this.currentScenario = data.currentScenario;
                    }
                    
                    if (data.settings) {
                        this.realtimeEnabled = data.settings.realtimeEnabled !== false;
                        const checkbox = document.getElementById('realtime-calc');
                        if (checkbox) {
                            checkbox.checked = this.realtimeEnabled;
                        }
                    }
                    
                    console.log('‚úÖ Saved data loaded');
                }
            } catch (error) {
                console.warn('Could not load saved data:', error);
            }
        }

        // Auto-save
        setupAutoSave() {
            setInterval(() => {
                this.saveData();
            }, 30000); // Save every 30 seconds
        }

        // Help System
        showHelp() {
            this.showToast(`
                üÜò Hilfe: Nutzen Sie Tastenk√ºrzel:
                Ctrl+Enter: Berechnen
                Ctrl+E: Beispiel laden
                Ctrl+P: PDF exportieren
                Ctrl+Z/Y: R√ºckg√§ngig/Wiederholen
            `, 'info');
        }
    }

    // Initialize the Ultimate Suite
    const app = new UltimateImmobilienSuite();
    window.app = app;

    // Additional CSS animations for slideOut toast
    const additionalStyles = document.createElement('style');
    additionalStyles.textContent = `
        @keyframes slideOutToast {
            to { transform: translateX(450px); opacity: 0; }
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th,
        .data-table td {
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
        }
        
        .data-table tr:hover {
            background: rgba(102, 126, 234, 0.05);
        }
    `;
    document.head.appendChild(additionalStyles);

    console.log('üöÄ Ultimate Enterprise Immobilien-Steuer-Suite 2025 loaded');
    console.log('üìä Features: Real-time AI, PDF Export, Multi-Scenario, Plugin Architecture');
    console.log('‚å®Ô∏è Keyboard shortcuts available - Press F1 for help');
</script>
```

</body>
</html>
